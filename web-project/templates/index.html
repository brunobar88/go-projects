{{define "Index"}}
{{template "_head"}}
{{template "_menu"}}

<body>
  <div class="container">
    <section class="card">
      <div class="row">
        <a href="/new" class="btn btn-primary mt-2 mb-2">Novo Produto</a>
      </div>
      <div>
        <table class="table table-striped table-hover mb-0">
          <thead>
            <tr>
                <th>Nome</th>
                <th>Descrição</th>
                <th>Preço</th>
                <th>Quantidade</th>
            </tr>
          </thead>
          <tbody>
            {{range .}}
            <tr>
                <td>{{.Name}}</td>
                <td>{{.Description}}</td>
                <td>{{.Price}}</td>
                <td>{{.Amount}}</td>
                <td>
                  <a href="/edit?id={{.Id}}" class="btn btn-primary">Editar</a>
                </td>
                <td>
                  <button class="btn btn-danger" onclick="checkDelete('{{.Id}}')">Deletar</button>
                </td>
            </tr>
            {{end}}
          </tbody>
        </table>
      </div>
    </section>
  </div>
</body>

<script>
  function checkDelete(id) {
    const answer = confirm("Tem certeza que deseja remover este produto?")

    if (answer) {
      window.location = `/delete?id=${id}`;
    }
  }
</script>

</html>
{{end}}